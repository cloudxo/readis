<div class="row">
    <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
        <div id="clientstats" style="width: 100%; height: 500px; background-color: #808080;"></div>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
        <div id="iostats" style="width: 100%; height: 500px; background-color: #808080;"></div>
    </div>
</div>


<button class="btn btn-default" id="b1">Add</button>

<script type="text/javascript">
    google.charts.load('current', {'packages': ['corechart']});
    google.charts.setOnLoadCallback(drawVisualization);

    function drawVisualization() {
        var clientstats = new google.visualization.LineChart(document.getElementById('clientstats'));
        var iostats = new google.visualization.LineChart(document.getElementById('iostats'));
        var lastTimePoint = 0;
        var clientData = new google.visualization.DataTable();
        var ioData = new google.visualization.DataTable();

        clientData.addColumn('string', 'Time');
        clientData.addColumn('number', 'Clients');

        ioData.addColumn('string', 'Time');
        ioData.addColumn('number', 'KB/sec.');

        var clientOptions = {
            title: 'Connected clients',
            width: 554,
            height: 500,
            vAxis: {minValue: 0, maxValue: 30},
            hAxis: {viewWindow: {min: 0, max: 10}},
            animation: {
                duration: 500,
                easing: 'in'
            }
        };
        var ioOptions = {
            title: 'Input / Output',
            width: 554,
            height: 500,
            vAxis: {minValue: 0, maxValue: 30},
            hAxis: {viewWindow: {min: 0, max: 10}},
            animation: {
                duration: 500,
                easing: 'in'
            }
        };

        var button = document.getElementById('b1');

        function drawClientStats() {
            // Disabling the button while the chart is drawing.
            button.disabled = true;
            google.visualization.events.addListener(clientstats, 'ready',
                function () {
                    button.disabled = false;
                });
            clientstats.draw(clientData, clientOptions);
        }

        function drawIoStats() {
            // Disabling the button while the chart is drawing.
            button.disabled = true;
            google.visualization.events.addListener(iostats, 'ready',
                function () {
                    button.disabled = false;
                });
            iostats.draw(ioData, ioOptions);
        }

        button.onclick = function () {
            lastTimePoint += 0.5;
            clientData.addRow([lastTimePoint.toString(), Math.round(Math.random() * 10)]);
            if (clientData.getNumberOfRows() > 10) {
                clientOptions.hAxis.viewWindow.min += 1;
                clientOptions.hAxis.viewWindow.max += 1;
            }
            drawClientStats();
        };

        drawClientStats();
        drawIoStats();
    }
</script>
